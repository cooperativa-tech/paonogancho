<script>
  window.toggleMenu = () => {
    document.querySelector("#navigation_menu").classList.toggle("opacity-100");
    document.querySelector("#navigation_menu").classList.toggle("pointer-events-none");
    document.body.classList.toggle("overflow-hidden");
  };

  window.onscroll = function (event) {
    const isScrollingUp = this.oldScroll > this.scrollY;
    this.oldScroll = this.scrollY;

    // For the mobile navigation bar
    if (isScrollingUp) document.querySelector("#navigation_bar").classList.remove("sm:-translate-y-full");
    else document.querySelector("#navigation_bar").classList.add("sm:-translate-y-full");

    // For the desktop navigation bar
    if (isScrollingUp) document.querySelector("#desktop_navigation_bar").classList.remove("-translate-y-full");
    else if(!isScrollingUp && this.scrollY > window.innerHeight * 0.5) document.querySelector("#desktop_navigation_bar").classList.add("-translate-y-full");

    if(this.scrollY > window.innerHeight * 0.5) {
      document.querySelector("#desktop_navigation_bar").style.paddingTop = '28px';
      document.querySelector("#desktop_navigation_bar").style.paddingBottom = '20px';
      document.querySelector("#desktop_navigation_bar").style.backgroundColor = 'rgba(255, 249, 243, 0.9)';
    } else {
      document.querySelector("#desktop_navigation_bar").style.paddingTop = '48px';
      document.querySelector("#desktop_navigation_bar").style.backgroundColor = 'rgba(255, 249, 243, 0)';
    }
  };
</script>

<div id="desktop_navigation_bar" class="fixed left-0 top-0 bg-beige w-full z-50 py-48 transition-transform transform sm:sr-only">
  <nav class="max-w-18-col mx-auto px-80 md:px-gutter ">
    <ul class="flex justify-end font-bold text-20 space-x-88 whitespace-nowrap xl:space-x-48">
      <li><a href="#como_funciona" class="btn-word-rotate">Como funciona</a></li>
      <li><a href="#seja_parceiro" class="btn-word-rotate-2">Faça o registo</a></li>
      <li><a href="#como_surgiu" class="btn-word-rotate">Sobre nós</a></li>
    </ul>
  </nav>
</div>

<div class="sm:hidden" style="height: 144px"></div>

<div id="navigation_bar" class="fixed hidden left-0 top-0 bg-beige w-full z-50 transition-transform transform sm:block" aria-hidden="true">
  <button
    class="block m-16 mr-16 ml-auto"
    onclick="window.toggleMenu()"
  >
  <img src="/images/menu-open.png" width="28" height="28" alt="Open menu">
  </button>
</div>

<div class="hidden sm:block" style="height: 72px"></div>

<div
  class="fixed w-full h-full top-0 left-0 bg-beige z-50 p-32 pointer-events-none transition-opacity opacity-0"
  id="navigation_menu"
  aria-hidden="true"
>
  <div class="flex flex-col h-full">
    <button class="fixed top-16 right-16" onclick="window.toggleMenu()">
      <img src="/images/menu-close.png" width="28" height="28" alt="Close menu">
    </button>

    <a href="#">
      <div class="flex flex-col text-28 font-serif" style="line-height: 0.8">
        <span>pão</span>
        <span>no</span>
        <span>gancho</span>
      </div>
    </a>

    <ul class="flex flex-col font-bold text-28 leading-none space-y-48 mt-96">
      <li>
        <a href="#como_funciona" onclick="window.toggleMenu()"
          >Como funciona?</a
        >
      </li>
      <li>
        <a href="#seja_parceiro" onclick="window.toggleMenu()">Seja parceiro</a>
      </li>
      <li>
        <a href="#como_surgiu" onclick="window.toggleMenu()">Como surgiu?</a>
      </li>
    </ul>

    <div class="mt-auto">
      <div class="flex flex-row space-x-24">
        <a
          class="flex justify-center w-32 text-black"
          href="#"
          aria-label="Facebook page"
        >
          {% include icons/facebook.svg %}
        </a>

        <a
          class="flex justify-center w-32 text-black"
          href="#"
          aria-label="Instagram page"
        >
          {% include icons/instagram.svg %}
        </a>
      </div>

      <a class="text-16" href="mailto:info@paonogancho.pt">
        info@paonogancho.pt
      </a>
    </div>
  </div>
</div>
